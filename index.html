<!DOCTYPE html>
<html lang="en">
<head>
	<title>chatbot prototype</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="dist/jquery.convform.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="demo.css">
</head>
<body>
	<section id="demo">
	    <div class="vertical-align"> 
	        <div class="container">
	            <div class="row">
	                <div class="col-sm-6 col-sm-offset-3 col-xs-offset-0">
	                    <div class="card no-border">
	                        <div id="chat" class="conv-form-wrapper">
	                            <form action="" method="GET" class="hidden">
	                                <select name="programmer" data-callback="storeState" data-conv-question="In order to monitor your mental health, I am going to ask you a series of questions. Are you ready?" name="first-question">
	                                    <option value="yes">Yes</option>
	                                    <option value="no">No</option>
									</select>
									<div data-conv-fork="programmer">
	                                    <div data-conv-case="yes">
	                                        <input type="text" data-conv-question="Great! Let's start." data-no-answer="true">
	                                    </div>
	                                    <div data-conv-case="no">
		                                    <select name="thought" data-conv-question="I understand.">
											<input type="text" data-conv-question="No worries. I will ask you again in 2 hours." data-no-answer="true">
		                                    </select>
	                                    </div>
	                                </div>
	                                <!-- <input type="text" name="name" data-conv-question="Great! Let's start.|No worries. I will ask you again in 2 hours."> -->
	                                <!-- <input type="text" data-conv-question="Howdy, {name}:0! It's a pleasure to meet you. (note that this question doesn't expect any answer)" data-no-answer="true"> -->
	                                <!-- <input type="text" data-conv-question="This plugin supports multi-select too. Let's see an example." data-no-answer="true"> -->
	                                <select name="multi[]" data-conv-question="Have you looked forward with enjoyment to things?" multiple>
	                                    <option value="As much as usual">As much as usual</option>
	                                    <option value="Less than I used to">Less than I used to</option>
	                                    <option value="Definitely less than I used to">Definitely less than I used to</option>
	                                    <option value="Hardly at all">Hardly at all</option>
									</select>
									<select name="multi[]" data-conv-question="Have you blamed yourself unnecesarily when something has gone wrong?" multiple>
	                                    <option value="Most of the time">Most of the time</option>
	                                    <option value="Some of the time">Some of the time</option>
	                                    <option value="Not very often">Not very often</option>
	                                    <option value="Never">Never</option>
									</select>
									<select name="multi[]" data-conv-question="Have you been anxious or worried for no reason?" multiple>
	                                    <option value="Not at all">Not at all</option>
	                                    <option value="Hardly ever">Hardly ever</option>
	                                    <option value="Sometimes">Sometimes</option>
	                                    <option value="Very often">Very often</option>
									</select>
									<select name="multi[]" data-conv-question="Have you felt scared or panicky for no very good reason?" multiple>
	                                    <option value="Quite a lot">Quite a lot</option>
	                                    <option value="Sometimes">Sometimes</option>
	                                    <option value="Not much">Not much</option>
	                                    <option value="Not at all">Not at all</option>
									</select>
									<select name="multi[]" data-conv-question="Have things been getting on top of you?" multiple>
	                                    <option value="I haven't been able to cope at all">I haven't been able to cope at all</option>
	                                    <option value="I haven't been coping as well as usual">I haven't been coping as well as usual</option>
	                                    <option value="I have coped quite well">I have coped quite well</option>
	                                    <option value="I have coped as well as ever">I have coped as well as ever</option>
									</select>
									<select name="multi[]" data-conv-question="Have you felt so unhappy you've had difficulty sleeping?" multiple>
	                                    <option value="Most of the time">Most of the time</option>
	                                    <option value="Sometimes">Sometimes</option>
	                                    <option value="Not very often">Not very often</option>
	                                    <option value="Not at all">Not at all</option>
									</select>
									<select name="multi[]" data-conv-question="Have you felt sad or miserable?" multiple>
	                                    <option value="Most of the time">Most of the time</option>
	                                    <option value="Sometimes">Sometimes</option>
	                                    <option value="Not very often">Not very often</option>
	                                    <option value="Not at all">Not at all</option>
									</select>
									<select name="multi[]" data-conv-question="Have you been so unhappy you've been crying?" multiple>
	                                    <option value="Most of the time">Most of the time</option>
	                                    <option value="Quite often">Quite often</option>
	                                    <option value="Only occassionally">Only occassionally</option>
	                                    <option value="Never">Never</option>
									</select>
									<select name="multi[]" data-conv-question="Have you thought of harming yourself?" multiple>
	                                    <option value="Quite often">Quite often</option>
	                                    <option value="Sometimes">Sometimes</option>
	                                    <option value="Hardly ever">Hardly ever</option>
	                                    <option value="Never">Never</option>
									</select>
									<select name="programmer" data-callback="storeState" data-conv-question="Thank you for taking the time for yourself. You're doing a great job. I have noticed a pattern the past couple of weeks and I think it would be a good idea for you to contact your OBGYN or a mental health professional about how you're feeling. Would you like to speak to one now?" name="first-question">
	                                    <option data-callback="mentalHealth" value="yes">Yes, connect me with someone</option>
	                                    <option value="no">No</option>
									</select>
									<div data-conv-fork="programmer">
	                                    <div data-conv-case="yes">
	                                        <option value="yes" data-callback="mentalHealth">Yes, connect me with someone</option>
	                                    </div>
	                                    <div data-conv-case="no">
		                                    <select name="thought" data-conv-question="I understand.">
											<!-- <input type="text" data-conv-question="No worries. I will ask you again in 2 hours." data-no-answer="true"> -->
		                                    </select>
	                                    </div>
									</div>
									
	                                <!-- <select name="programmer" data-callback="storeState" data-conv-question="Thank you for taking the time for yourself. You're doing a great job. I have noticed a pattern the past couple of weeks and I think it would be a good idea for you to contact your OBGYN or a mental health professional about how you're feeling. Would you like to speak to one now?">
	                                    <option value="yes" data-callback="mentalHealth">Yes, connect me with someone</option>
	                                    <option value="no">No</option>
	                                </select>
	                                
	                                <input type="teBDBDBDxt" data-conv-question="convForm also supports regex patterns. Look:" data-no-answer="true">
	                                <input data-conv-question="Type in your e-mail" data-pattern="^[a-zA-Z0-9.!#$%&â€™*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$" id="email" type="email" name="email" required placeholder="What's your e-mail?">
	                                <input data-conv-question="Now tell me a secret (like a password)" type="password" data-minlength="6" id="senha" name="password" required placeholder="password">
									<select data-conv-question="Selects also support callback functions. For example, try one of these:">
											<option value="google" data-callback="google">Google</option>
											<option value="bing" data-callback="bing">Bing</option>
									</select>
	                                <select name="callbackTest" data-conv-question="You can do some cool things with callback functions. Want to rollback to the 'programmer' question before?">
	                                    <option value="yes" data-callback="rollback">Yes</option>
	                                    <option value="no" data-callback="restore">No</option>
	                                </select>
	                                <select data-conv-question="This is it! If you like me, consider donating! If you need support, contact me. When the form gets to the end, the plugin submits it normally, like you had filled it." id="">
	                                    <option value="">Awesome!</option>
	                                </select> -->
	                            </form>
	                        </div>
	                    </div>
	                </div>
	            </div>
	        </div>
	    </div>
	</section>
	<script type="text/javascript" src="jquery-1.12.3.min.js"></script>
	<script type="text/javascript" src="dist/autosize.min.js"></script>
	<script type="text/javascript" src="dist/jquery.convform.js"></script>

	<script>
		function mentalHealth(stateWrapper, ready) {
			window.open("https://www.healthyminds.nyc/");
			ready();
		}
		function bing(stateWrapper, ready) {
			window.open("https://bing.com");
			ready();
		}
		var rollbackTo = false;
		var originalState = false;
		function storeState(stateWrapper, ready) {
			rollbackTo = stateWrapper.current;
			console.log("storeState called: ",rollbackTo);
			ready();
		}
		function rollback(stateWrapper, ready) {
			console.log("rollback called: ", rollbackTo, originalState);
			console.log("answers at the time of user input: ", stateWrapper.answers);
			if(rollbackTo!=false) {
				if(originalState==false) {
					originalState = stateWrapper.current.next;
						console.log('stored original state');
				}
				stateWrapper.current.next = rollbackTo;
				console.log('changed current.next to rollbackTo');
			}
			ready();
		}
		function restore(stateWrapper, ready) {
			if(originalState != false) {
				stateWrapper.current.next = originalState;
				console.log('changed current.next to originalState');
			}
			ready();
		}
	</script>
	<script>
		jQuery(function($){
			convForm = $('#chat').convform({selectInputStyle: 'disable'});
			console.log(convForm);
		});
	</script>
</body>
</html>